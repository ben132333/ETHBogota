(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3035],{53129:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return r(53188)}])},4047:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(26042),s=r(69396),a=r(99534),i=r(85893),u=r(67294),c=r(94184),o=r.n(c),l=(0,u.forwardRef)((function(e,t){var r=e.className,u=e.type,c=void 0===u?"text":u,l=e.full,d=(0,a.Z)(e,["className","type","full"]);return(0,i.jsx)("input",(0,s.Z)((0,n.Z)({},d),{className:o()("px-2 py-1.5 font-normal antialiased",{"w-full":l},r),type:c,ref:t}))}))},80884:function(e,t,r){"use strict";var n;r.d(t,{$:function(){return n}}),function(e){e.ERROR="error",e.WARNING="warning",e.SUCCESS="success",e.INFO="info"}(n||(n={}))},53188:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return X}});var n=r(85893),s=r(47568),a=r(26042),i=r(69396),u=r(828),c=r(34051),o=r.n(c),l=r(61431),d=r(30714),m=r(51933),f=r(9669),p=r.n(f),h=r(11163),x=r(67294),v=r(88767),w=r(84337),g=r(82670),b=r(56063),y=r(4047),N=r(87536),j=r(47533),E=r(74231),S=r(52523),R=r(54750),Z=r(69587),_=r(94184),k=r.n(_),T=E.Ry().shape({email:E.Z_().email().required()}).required();function q(e){var t,r,u=e.onSubmit,c=(0,N.cI)({resolver:(0,j.X)(T)}),l=c.register,d=c.handleSubmit,m=c.setError,f=c.formState,p=f.isSubmitting,h=f.errors;return(0,n.jsxs)("form",{onSubmit:d(function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,g.Z)(e.t0,Error)&&m("email",{message:"Something went wrong, please try again"},{shouldFocus:!0});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),className:"mt-4 md:mt-8",children:[(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{children:(0,n.jsxs)(S.D,{field:"email",fieldErrors:(null===(t=h.email)||void 0===t?void 0:t.message)?{email:[null===(r=h.email)||void 0===r?void 0:r.message]}:{},children:[(0,n.jsx)(R.F,{className:"relative mt-1",identifier:"email",label:"Email",children:(0,n.jsx)(y.I,(0,i.Z)((0,a.Z)({},l("email")),{id:"email",disabled:p,name:"email",className:k()("form-input-box h-11 bg-transparent px-2 py-2 font-interregular"),style:{fontSize:"14px"},placeholder:"Email"}))}),(0,n.jsx)(Z.L,{})]})})}),(0,n.jsx)("div",{className:"mt-4 pb-12 md:mt-14 md:pb-40",children:(0,n.jsx)(b.zx,{type:"submit",size:"large",className:"w-full",disabled:p,children:p?"Submitting...":"Send instructions"})})]})}var A=r(42472),O=r(80884),C=r(70883),I=r(6990),F="Something went wrong. Please reload the page and try again.",P="reset-password";function z(){var e=(0,v.useMutation)((function(e){return p().post("/api/auth/request-password-reset",e)})),t=(0,A.x_)().newToast,r=(0,h.useRouter)(),c=(0,d.Z)().execute,f=(0,u.Z)(x.useState(),2),g=f[0],b=f[1],y=(0,l.n)({resource:P,onError:function(e){console.error("Error obtaining crowd controller token, please try again",e),b(e.message)},onTimeout:function(){b("Timeout, please try again")},timeout:500}),N=y.cancelAccessRequest,j=(y.loading,y.queued),E=y.requestAccess,S=x.useCallback(function(){var n=(0,s.Z)(o().mark((function n(s){var u,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E({payload:{}});case 3:if(u=n.sent){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,c({action:P});case 8:return l=n.sent,n.next=11,e.mutateAsync((0,i.Z)((0,a.Z)({},s),{accessToken:u,recaptchaToken:l}));case 11:n.sent.data.success?r.push(I.Z.resetPasswordSent()):t({type:O.$.ERROR,message:F,closeAfter:1e4,closable:!0}),n.next=19;break;case 15:throw n.prev=15,n.t0=n.catch(0),t({type:O.$.ERROR,message:F,closeAfter:1e4,closable:!0}),n.t0;case 19:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}(),[e,t,r]),R=j||g;return(0,n.jsx)(C.Y,{children:(0,n.jsx)("div",{className:"mt-4 md:mt-8",children:R?(0,n.jsx)("div",{children:(0,n.jsx)(w.J,{handleExit:function(){N(),b("")},error:g||void 0})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.uT,{variant:"xl",className:"mt-0 md:mt-1",children:"Enter the email address associated with your account and we'll send an email with instructions to reset your password."}),(0,n.jsx)(q,{onSubmit:S})]})})})}function X(){return(0,n.jsx)(z,{})}}},function(e){e.O(0,[158,7536,2674,5248,9608,9774,2888,179],(function(){return t=53129,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=reset-password-22919879b9437118.js.map