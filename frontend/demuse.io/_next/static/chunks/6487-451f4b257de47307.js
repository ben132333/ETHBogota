(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6487],{93221:function(e,t,a){"use strict";a.d(t,{x:function(){return f}});var n=a(85893),s=a(67294),r=a(51933),i=a(94184),l=a.n(i),o=function(e){var t=e.className||"h-6 w-6";return(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:t,children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 6.46967L6 11.4697L5.46967 12L6 12.5303L11 17.5303L12.0607 16.4697L8.34099 12.75H18.5303V11.25H8.34099L12.0607 7.53033L11 6.46967Z",fill:"black"})})},c=a(26042),u=a(69396),d=a(99534);function m(e){var t=e.className,a=(0,d.Z)(e,["className"]),s=t||"h-5 w-5";return(0,n.jsx)("svg",(0,u.Z)((0,c.Z)({className:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},a),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}))}function f(e){var t=e.closeable,a=void 0===t||t,s=e.onClose,i=e.title,c=e.onBack,u=e.activeStep,d=e.steps;return(0,n.jsxs)("div",{children:[c?(0,n.jsx)("div",{className:"absolute left-6 top-6 z-10 cursor-pointer",onClick:c,children:(0,n.jsx)(o,{})}):(0,n.jsx)("div",{}),(0,n.jsx)("div",{className:"pt-6",children:(0,n.jsx)("div",{className:"absolute right-6 top-6",children:a?(0,n.jsx)("div",{className:l()("ease flex cursor-pointer items-center justify-center  text-contrast-max transition","h-5 w-5  hover:bg-contrast-max hover:text-contrast-max-inverse"),onClick:s,children:(0,n.jsx)(m,{className:"h-5 w-5 cursor-pointer"})}):null})}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[d&&u?(0,n.jsx)(h,{steps:d,activeStep:u}):null,(0,n.jsx)(r.X6,{className:"text-center uppercase",variant:"h6",color:"contrast-default",children:i})]}),(0,n.jsx)("div",{className:"my-6 h-[1px] w-full bg-line-0"})]})]})}function h(e){var t=e.activeStep,a=e.steps,i=(0,s.useMemo)((function(){return Array(a).fill(0)}),[a]);return(0,n.jsx)("div",{className:"mb-2 flex items-center justify-center",children:i.map((function(e,a){var i=a+1,o=t===i;return(0,n.jsxs)(s.Fragment,{children:[0!==a?(0,n.jsx)("div",{className:"m-1 h-[1px] w-[26px] bg-line-1 "}):null,(0,n.jsx)(r.uT,{color:"unset",variant:"xs",className:l()("flex h-[24px] min-w-[24px] items-center justify-center rounded-full transition-all",{"bg-interactive-1":o,"text-white":o,"bg-base-1":!o,"text-contrast-max":!o}),children:i})]},"".concat(i,"-t"))}))})}},89584:function(e,t,a){"use strict";a.d(t,{u:function(){return m}});var n=a(26042),s=a(828),r=a(85893),i=a(67294),l=a(85518),o=a(11355),c=a(43825),u=a(93221),d=a(92236);function m(e){var t=e.open,a=e.static,m=e.children,f=e.initialFocus,h=e.closeable,p=void 0===h||h,v=e.onClose,x=e.style,g=void 0===x?{}:x,y=e.className,b=void 0===y?"max-w-xl":y,k=e.closeWithEscape,w=void 0!==k&&k,j=e.title,F=void 0===j?"Modal":j,C=e.contentClassName,N=void 0===C?"":C,S=e.footer,T=e.header,L=e.animateHeight,R=void 0!==L&&L,E=e.transparent,M=void 0!==E&&E,K=e.disableFullScreenOnMobile,V=(0,i.useState)(t),Z=V[0],A=V[1],_=(0,s.Z)(i.useState(null),2),I=_[0],z=_[1],U=function(e,t){var a=(0,s.Z)(i.useState("auto"),2),n=a[0],r=a[1];return(0,i.useEffect)((function(){var a;e&&t&&r((null===(a=e.getBoundingClientRect())||void 0===a?void 0:a.height)||"auto")}),[e,t]),(0,d.Z)(e||null,(function(e){var t;r((null===e||void 0===e||null===(t=e.contentRect)||void 0===t?void 0:t.height)||"auto")})),n}(I,!!Z),O=!K,B=M?"bg-black/10":"bg-black/80",D=(0,i.useCallback)((function(){p&&v&&v()}),[p,v]);return(0,i.useEffect)((function(){if(p&&w){var e=function(e){"Escape"===e.key&&D()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[p,w,D]),(0,i.useEffect)((function(){var e;return t?A(!0):e=setTimeout((function(){A(!1)}),300),function(){return clearTimeout(e)}}),[t]),(0,r.jsx)(o.u.Root,{appear:"true",show:t,as:i.Fragment,children:(0,r.jsx)(c.V,{as:"div",static:a,initialFocus:f,className:"fixed inset-0 z-50 overflow-y-auto",open:Z,onClose:function(){},children:(0,r.jsxs)("div",{className:"fixed inset-0 flex min-h-screen items-end justify-center overflow-y-auto px-4 pb-20 pt-4 text-center sm:block sm:p-0 ".concat(O?"items-end":"items-center"),children:[(0,r.jsx)(o.u.Child,{as:i.Fragment,appear:"true",enter:"ease duration-[200ms]",enterFrom:"opacity-0",enterTo:"opacity-70 md:opacity-100",leave:"ease duration-[200ms] delay-100",leaveFrom:"opacity-70 md:opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(c.V.Overlay,{className:"fixed inset-0",children:(0,r.jsx)("div",{onClick:D,className:"".concat(B," fixed inset-0 transition-opacity")})})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(o.u.Child,{as:i.Fragment,appear:"true",enter:"ease duration-[300ms] md:ease-out md:duration-[300ms]",enterFrom:"translate-y-[100vh] sm:opacity-0 sm:translate-y-0 sm:scale-110",enterTo:"sm:opacity-100 translate-y-0 sm:scale-100",leave:"ease duration-200",leaveFrom:"sm:opacity-100 translate-y-0 sm:scale-100",leaveTo:"translate-y-[100vh] md:opacity-0 sm:translate-y-0 sm:scale-110",children:(0,r.jsx)("div",{style:(0,n.Z)({height:U},g),className:"\n                ".concat(b||"","\n                ").concat(O?"top-0 right-0 bottom-0 left-0 min-h-[100vh] w-auto":"top-auto right-4 bottom-auto left-4 min-h-[unset] w-auto rounded-lg shadow-xl transition-all","\n                fixed inline-block transform overflow-hidden bg-base-0 text-left align-middle sm:relative sm:top-auto sm:right-auto sm:bottom-auto sm:left-auto sm:my-8 sm:min-h-[unset] sm:w-full sm:rounded-lg sm:align-middle sm:shadow-xl sm:transition-all"),children:(0,r.jsx)("div",{ref:function(e){return l.tq?null:R&&z(e)},children:m&&Z?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:N||"px-6 pb-6",children:["object"===typeof T?T:(0,r.jsx)(u.x,{closeable:p,onClose:D,title:F}),m]}),S]}):null})})})]})})})}},37910:function(e,t,a){"use strict";a.r(t);var n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"code",variableName:"input"}],concreteType:"TwoFactorChannel",kind:"LinkedField",name:"verifyTwoFactorChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"authTwoFaFormsVerifyMutation",selections:t,type:"RootMutationType",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"authTwoFaFormsVerifyMutation",selections:t},params:{id:"976121dda382c6901e493bbbeb8cf131",metadata:{},name:"authTwoFaFormsVerifyMutation",operationKind:"mutation",text:null}}}();n.hash="9e15d6ec33dbddcb384cf41079d28829",t.default=n},76062:function(e,t,a){"use strict";a.r(t);var n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"channelId",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"authTwoFaFormsVerifyResendMutation",selections:[{alias:null,args:t,concreteType:"TwoFactorChannel",kind:"LinkedField",name:"startTwoFactorVerification",plural:!1,selections:[{alias:null,args:null,concreteType:"PrivateUser",kind:"LinkedField",name:"privateUser",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"authTwoFaChannels_user"}],storageKey:null}],storageKey:null}],type:"RootMutationType",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"authTwoFaFormsVerifyResendMutation",selections:[{alias:null,args:t,concreteType:"TwoFactorChannel",kind:"LinkedField",name:"startTwoFactorVerification",plural:!1,selections:[{alias:null,args:null,concreteType:"PrivateUser",kind:"LinkedField",name:"privateUser",plural:!1,selections:[{alias:null,args:null,concreteType:"TwoFactorChannel",kind:"LinkedField",name:"twoFactorChannels",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identifier",storageKey:null}],storageKey:null},a],storageKey:null},a],storageKey:null}]},params:{id:"2563e545a83710d9cc8387c4d88010be",metadata:{},name:"authTwoFaFormsVerifyResendMutation",operationKind:"mutation",text:null}}}();n.hash="aa5343dd192058f5831f695c441047fb",t.default=n},8607:function(e,t,a){"use strict";a.d(t,{d:function(){return j}});var n=a(47568),s=a(828),r=a(34051),i=a.n(r),l=a(85893),o=a(67294),c=a(87536),u=a(22578),d=a(88767),m=a(9669),f=a.n(m),h=a(56063),p=a(51933),v=a(42472),x=a(80884),g=a(8702),y=a.n(g),b=a(26100),k=a.n(b),w=function(e){var t=e.code,a=e.setCode,n=e.hasError;return(0,l.jsx)("div",{className:k().container,children:(0,l.jsx)(y(),{validChars:"0-9",placeholder:"",autoFocus:!0,onChange:a,value:t,classNames:{container:"border h-10 sm:h-12 p-1 sm:p-2 space-x-0.5 sm:space-x-2 font-interregular font-bold mx-auto ".concat(n?"border-error-10":""),character:"bg-gray-100 flex items-center justify-center",characterInactive:"bg-gray-100 flex items-center justify-center",characterSelected:"bg-gray-100 flex items-center justify-center"}})})};function j(e){var t=e.mode,r=e.phone,m=e.channelId,g=e.onSuccess,y=(0,c.cI)({mode:"onChange"}),b=y.handleSubmit,k=y.reset,j=y.formState,F=j.isValid,C=j.isSubmitted,N=j.isSubmitSuccessful,S=(0,v.x_)().newToast,T=(0,o.useState)(!1),L=T[0],R=T[1],E=(0,o.useState)(!1),M=E[0],K=E[1],V=(0,d.useMutation)((function(e){var t=e.code;return f().post("/api/auth/two-fa/verify",{code:t})})),Z=(0,s.Z)((0,u.useMutation)(a(37910)),2),A=Z[0],_=Z[1],I=(0,o.useState)(!1),z=I[0],U=I[1],O=(0,d.useMutation)((function(e){var t=e.channelId;return f().post("/api/auth/two-fa/resend",{channelId:t})})),B=(0,s.Z)((0,u.useMutation)(a(76062)),2),D=B[0],$=B[1];(0,o.useEffect)((function(){N&&k()}),[N,k]);var q=(0,o.useState)(""),H=q[0],P=q[1],J=_||M||$||z||!H||H.length<6||!F||C,W=(0,o.useCallback)((0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return");case 2:if(R(!1),"login"!==t){e.next=18;break}return K(!0),e.prev=5,e.next=8,V.mutateAsync({code:H});case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),K(!1),R(!0),e.abrupt("return");case 15:g(),e.next=19;break;case 18:"add"===t&&A({variables:{input:H},onCompleted:function(e){(null===e||void 0===e?void 0:e.verifyTwoFactorChannel)?(S({type:x.$.SUCCESS,message:"Phone verified",closable:!0,closeAfter:8e3}),g()):R(!0)},onError:function(){R(!0)}});case 19:case"end":return e.stop()}}),e,null,[[5,10]])}))),[H,t,S,A,V,g,R]),X=(0,o.useCallback)((0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!1),"login"!==t){e.next=16;break}return e.prev=2,U(!0),e.next=6,O.mutateAsync({channelId:m});case 6:U(!1),S({type:x.$.SUCCESS,message:"Code resent",closable:!0,closeAfter:8e3}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),U(!1),S({type:x.$.ERROR,message:"Failed to resend code, please reload the page and try again",closable:!0,closeAfter:8e3});case 14:e.next=17;break;case 16:"add"===t&&D({variables:{input:m},onCompleted:function(){S({type:x.$.SUCCESS,message:"Code resent",closable:!0,closeAfter:8e3})},onError:function(){S({type:x.$.ERROR,message:"Failed to resend code, please reload the page and try again",closable:!0,closeAfter:8e3})}});case 17:case"end":return e.stop()}}),e,null,[[2,10]])}))),[m,t,O,S,D]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{onSubmit:b(W),children:[(0,l.jsxs)(p.uT,{variant:"large",className:"mt-6 text-center md:mt-6",children:["Enter the 6-digit code sent to ",r||"your phone"]}),(0,l.jsxs)("div",{className:"mt-8",children:[(0,l.jsx)(w,{code:H,setCode:P,hasError:L}),L?(0,l.jsx)("div",{className:"mt-4 text-center text-sm text-error-10",children:"You've entered the wrong verification code. Try again."}):null]}),(0,l.jsx)("div",{className:"mt-16",children:(0,l.jsx)(h.zx,{size:"large",type:"submit",disabled:J,className:"track-btn-create-account w-full",children:_||M?"Confirming":"Confirm"})})]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsxs)(p.uT,{variant:"large",className:"mt-6 text-center md:mt-6",children:["Didn't get the code?"," ",(0,l.jsx)(h.zx,{variant:"linkInteractive",onClick:X,className:"px-0 py-0",style:{fontSize:"inherit"},children:$||z?"Resending":"Resend"})]})})]})}},26100:function(e){e.exports={container:"auth-two-fa-forms-verification-input_container__JC8qB"}}}]);
//# sourceMappingURL=6487-451f4b257de47307.js.map